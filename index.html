<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FisioXpress | Plataforma Integral</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fisioPrimary: '#002855', // Azul Marino
                        fisioAccent: '#00AEEF',  // Celeste
                        fisioLight: '#F0F9FF'    // Fondo Claro
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .hidden-section { display: none; }
        .fade-in { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        body { background-color: #F0F9FF; }
    </style>
</head>
<body class="text-gray-800 font-sans">

    <nav class="bg-fisioPrimary text-white p-3 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center cursor-pointer" onclick="showSection('home')">
                <div class="flex items-center gap-2">
                    <img src="assets/logo.png" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'" alt="Logo" class="h-10 bg-white rounded p-1">
                    <span class="text-xl font-bold tracking-wider hidden">FISIOXPRESS</span>
                </div>
            </div>
            <button onclick="showSection('home')" class="text-sm hover:bg-fisioAccent hover:text-white bg-white bg-opacity-10 px-4 py-2 rounded transition flex items-center gap-2">
                <i class="fa-solid fa-home"></i> <span class="hidden md:inline">Men√∫ Principal</span>
            </button>
        </div>
    </nav>

    <div id="home" class="container mx-auto p-6 section fade-in min-h-screen">
        <div class="text-center mb-10 mt-5">
            <h2 class="text-4xl font-extrabold text-fisioPrimary mb-3">Bienvenido a FisioXpress</h2>
            <p class="text-lg text-gray-600">Tu bienestar en manos de profesionales.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto">
            <div onclick="showSection('app-citas')" class="bg-white p-8 rounded-2xl shadow-md hover:shadow-2xl transition cursor-pointer border-b-4 border-fisioAccent group hover:-translate-y-1">
                <div class="text-fisioAccent text-5xl mb-6 text-center group-hover:scale-110 transition"><i class="fa-solid fa-calendar-check"></i></div>
                <h3 class="text-2xl font-bold text-center mb-3 text-fisioPrimary">Reserva de Citas</h3>
                <p class="text-sm text-center text-gray-500">Agenda tu sesi√≥n ahora.</p>
            </div>
            <div onclick="checkAuth('staff')" class="bg-white p-8 rounded-2xl shadow-md hover:shadow-2xl transition cursor-pointer border-b-4 border-fisioPrimary group hover:-translate-y-1">
                <div class="text-fisioPrimary text-5xl mb-6 text-center group-hover:scale-110 transition"><i class="fa-solid fa-cash-register"></i></div>
                <h3 class="text-2xl font-bold text-center mb-3 text-fisioPrimary">Control Interno</h3>
                <p class="text-sm text-center text-gray-500">Acceso Staff.</p>
            </div>
            <div onclick="checkAuth('staff_historia')" class="bg-white p-8 rounded-2xl shadow-md hover:shadow-2xl transition cursor-pointer border-b-4 border-fisioAccent group hover:-translate-y-1">
                <div class="text-fisioAccent text-5xl mb-6 text-center group-hover:scale-110 transition"><i class="fa-solid fa-file-medical-alt"></i></div>
                <h3 class="text-2xl font-bold text-center mb-3 text-fisioPrimary">Historias Cl√≠nicas</h3>
                <p class="text-sm text-center text-gray-500">Evoluci√≥n de pacientes.</p>
            </div>
            <div onclick="checkAuth('gerencia')" class="bg-white p-8 rounded-2xl shadow-md hover:shadow-2xl transition cursor-pointer border-b-4 border-gray-800 group hover:-translate-y-1">
                <div class="text-gray-800 text-5xl mb-6 text-center group-hover:scale-110 transition"><i class="fa-solid fa-chart-pie"></i></div>
                <h3 class="text-2xl font-bold text-center mb-3 text-fisioPrimary">Gerencia</h3>
                <p class="text-sm text-center text-gray-500">Reportes financieros.</p>
            </div>
        </div>
    </div>

    <div id="app-citas" class="hidden-section container mx-auto p-4 max-w-2xl fade-in pb-20 pt-10">
        <div class="bg-white rounded-2xl shadow-xl p-8 border-t-8 border-fisioAccent">
            <h2 class="text-3xl font-bold text-fisioPrimary mb-8 text-center">üìÖ Agendar tu Cita</h2>
            <form id="form-cita" onsubmit="enviarCita(event)">
                
                <div class="bg-fisioLight p-3 rounded mb-4 font-bold text-fisioPrimary"><i class="fa-solid fa-user"></i> Datos Personales</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <input type="text" id="cita-nombre" placeholder="Nombres" required class="p-3 border rounded focus:border-fisioAccent outline-none">
                    <input type="text" id="cita-apellido" placeholder="Apellidos" required class="p-3 border rounded focus:border-fisioAccent outline-none">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <select id="cita-doc-tipo" class="p-3 border rounded"><option>DNI</option><option>C.E.</option><option>Pasaporte</option></select>
                    <input type="text" id="cita-doc-num" placeholder="N¬∞ Documento" required class="p-3 border rounded col-span-2 focus:border-fisioAccent outline-none">
                </div>
                <div class="mb-4">
                    <input type="email" id="cita-email" placeholder="Correo Electr√≥nico" required class="p-3 border rounded w-full focus:border-fisioAccent outline-none">
                </div>
                <div class="mb-8">
                    <input type="tel" id="cita-whatsapp" placeholder="WhatsApp (Ej: 999888777)" required class="p-3 border rounded w-full focus:border-fisioAccent outline-none">
                </div>

                <div class="bg-fisioLight p-3 rounded mb-4 font-bold text-fisioPrimary"><i class="fa-solid fa-clock"></i> Datos de la Reserva</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <input type="date" id="cita-fecha" required class="p-3 border rounded w-full focus:border-fisioAccent outline-none">
                    <input type="time" id="cita-hora" required class="p-3 border rounded w-full focus:border-fisioAccent outline-none" min="09:00" max="20:00">
                </div>

                <div class="mb-8">
                    <label class="text-sm font-bold text-gray-500 mb-2 block">Selecciona Servicio y Duraci√≥n</label>
                    <div class="relative">
                        <select id="cita-servicio" required class="p-4 border-2 border-gray-200 rounded-lg w-full bg-white font-medium appearance-none focus:border-fisioAccent outline-none transition">
                            <option value="" disabled selected>-- Elige una opci√≥n --</option>
                            
                            <optgroup label="‚è±Ô∏è Sesiones de 30 Minutos">
                                <option value="Evaluaci√≥n Fisioterap√©utica" data-time="30">Evaluaci√≥n Fisioterap√©utica (30 min)</option>
                                <option value="Masaje Relajante 30" data-time="30">Masaje Relajante (30 min)</option>
                                <option value="Masaje Descontracturante 30" data-time="30">Masaje Descontracturante (30 min)</option>
                            </optgroup>

                            <optgroup label="‚è±Ô∏è Sesiones de 45 Minutos">
                                <option value="Masaje Relajante 45" data-time="45">Masaje Relajante (45 min)</option>
                                <option value="Masaje Descontracturante 45" data-time="45">Masaje Descontracturante (45 min)</option>
                            </optgroup>

                            <optgroup label="‚è±Ô∏è Sesiones de 60 Minutos">
                                <option value="Masaje Relajante 60" data-time="60">Masaje Relajante (60 min)</option>
                                <option value="Masaje Descontracturante 60" data-time="60">Masaje Descontracturante (60 min)</option>
                                <option value="Masaje Deportivo" data-time="60">Masaje Deportivo (60 min)</option>
                                <option value="Drenaje Linf√°tico" data-time="60">Drenaje Linf√°tico (60 min)</option>
                            </optgroup>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2 italic">* Las sesiones de 45 min reservar√°n 1 hora en agenda para mejor atenci√≥n.</p>
                </div>

                <button type="submit" id="btn-cita" class="w-full bg-fisioAccent hover:bg-fisioPrimary text-white font-extrabold py-4 rounded-xl transition shadow-lg text-lg">
                    CONFIRMAR RESERVA <i class="fa-solid fa-check-circle ml-2"></i>
                </button>
            </form>
        </div>
    </div>

    <div id="app-staff" class="hidden-section container mx-auto p-4 max-w-4xl fade-in pb-20 pt-10">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-2xl font-bold text-fisioPrimary mb-6"><i class="fa-solid fa-cash-register"></i> Control Interno</h2>
            <div class="mb-4 text-sm text-gray-500">Usuario: <span id="staff-name-display" class="font-bold text-fisioAccent"></span></div>
            
            <div class="flex p-1 bg-gray-100 rounded-xl mb-6">
                <button onclick="setStaffMode('venta')" id="tab-venta" class="flex-1 py-3 rounded-xl font-bold bg-white text-fisioAccent shadow-sm transition">Venta</button>
                <button onclick="setStaffMode('anulacion')" id="tab-anulacion" class="flex-1 py-3 rounded-xl font-bold text-gray-500 hover:text-red-500 transition">Anulaci√≥n</button>
            </div>
            
            <form id="form-venta" onsubmit="registrarVenta(event)">
                <input type="hidden" id="venta-estado" value="Venta">
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <select id="venta-terapeuta" class="p-3 border rounded w-full" required>
                        <option value="">Terapeuta...</option><option>Ana Pisfil</option><option>Isabel Barriga</option><option>Carmen Rodriguez</option>
                    </select>
                    <input type="text" id="venta-paciente" placeholder="Paciente" class="p-3 border rounded w-full col-span-2" required>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <input type="date" id="venta-fecha" class="p-3 border rounded w-full" required>
                    <select id="venta-servicio" class="p-3 border rounded w-full" required onchange="autoPrice(this)">
                        <option value="">Servicio...</option>
                        <option data-price="30">Masaje 30min (S/30)</option>
                        <option data-price="45">Masaje 45min (S/45)</option>
                        <option data-price="80">Paquete 3 Ses (S/80)</option>
                        <option data-price="700">Paquete 10 Fisio (S/700)</option>
                        <option value="custom">Otro</option>
                    </select>
                    <select id="venta-pago" class="p-3 border rounded w-full" required><option>YAPE/PLIN</option><option>EFECTIVO</option><option>TARJETA</option></select>
                </div>
                <div class="mb-6 flex justify-between items-center bg-fisioLight p-4 rounded border border-fisioAccent">
                    <span class="font-bold text-fisioPrimary">MONTO (S/)</span>
                    <input type="number" step="0.01" id="venta-monto" placeholder="0.00" class="w-32 p-2 text-right font-bold text-xl bg-white rounded border" required>
                </div>
                <div id="div-anulacion-motivo" class="hidden mb-6 bg-red-50 p-4 rounded border border-red-200">
                    <input type="text" id="anulacion-motivo" placeholder="Motivo de Anulaci√≥n (Obligatorio)" class="w-full p-2 border border-red-300 rounded">
                </div>
                <button type="submit" id="btn-venta" class="w-full bg-fisioAccent hover:bg-fisioPrimary text-white font-bold py-3 rounded-lg shadow">REGISTRAR</button>
            </form>
        </div>
    </div>

    <div id="app-historia" class="hidden-section container mx-auto p-4 max-w-5xl fade-in pb-20 pt-10">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-2xl font-bold text-fisioPrimary mb-6">Historias Cl√≠nicas</h2>
            <div class="bg-fisioLight p-6 rounded-xl mb-6 flex gap-4">
                <input type="text" id="historia-search" placeholder="DNI o Apellido" class="flex-grow p-3 border rounded">
                <button onclick="buscarHistoria()" class="bg-fisioPrimary text-white px-6 rounded font-bold">Buscar</button>
            </div>
            <div id="resultados-historia" class="hidden mb-6 p-4 border rounded"></div>
            
            <div class="border-t pt-6">
                <h3 class="font-bold mb-4 text-fisioAccent">Nueva Evoluci√≥n</h3>
                <form onsubmit="guardarHistoria(event)">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                        <input id="hc-dni" placeholder="DNI" class="p-3 border rounded" required>
                        <input id="hc-nombre" placeholder="Nombre" class="p-3 border rounded col-span-2" required>
                        <input id="hc-edad" placeholder="Edad" class="p-3 border rounded">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <textarea id="hc-motivo" placeholder="Motivo/Diagn√≥stico" class="p-3 border rounded h-24"></textarea>
                        <textarea id="hc-antecedentes" placeholder="Antecedentes" class="p-3 border rounded h-24"></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="p-3 border rounded">
                            <label>Dolor (EVA): <span id="eva-display" class="font-bold text-fisioAccent">1</span></label>
                            <input type="range" min="1" max="10" value="1" class="w-full accent-fisioAccent" oninput="document.getElementById('eva-display').innerText=this.value;document.getElementById('hc-eva').value=this.value">
                            <input type="hidden" id="hc-eva" value="1">
                        </div>
                        <textarea id="hc-tratamiento" placeholder="Tratamiento Hoy" class="p-3 border rounded h-24"></textarea>
                    </div>
                    <button class="w-full bg-fisioPrimary text-white font-bold py-3 rounded">GUARDAR HISTORIA</button>
                </form>
            </div>
        </div>
    </div>

    <div id="app-gerencia" class="hidden-section container mx-auto p-4 fade-in pb-20 pt-10">
        <div class="flex justify-between items-center mb-6 bg-white p-6 rounded-2xl shadow">
            <h2 class="text-2xl font-bold text-fisioPrimary">Dashboard</h2>
            <button onclick="cargarFinanzas()" class="text-fisioAccent font-bold border border-fisioAccent px-4 py-2 rounded hover:bg-fisioAccent hover:text-white transition">Actualizar</button>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white p-6 rounded-2xl shadow border-b-4 border-green-500">
                <p class="text-sm font-bold text-gray-400 uppercase">Ingresos</p>
                <h3 id="kpi-ingresos" class="text-4xl font-extrabold text-fisioPrimary">S/ ...</h3>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow border-b-4 border-red-500">
                <p class="text-sm font-bold text-gray-400 uppercase">Gastos</p>
                <h3 id="kpi-gastos" class="text-4xl font-extrabold text-fisioPrimary">S/ ...</h3>
            </div>
            <div class="bg-fisioPrimary p-6 rounded-2xl shadow text-white">
                <p class="text-sm font-bold text-fisioAccent uppercase">Utilidad</p>
                <h3 id="kpi-utilidad" class="text-4xl font-extrabold">S/ ...</h3>
            </div>
        </div>
        <div class="bg-white rounded-xl shadow overflow-hidden">
            <table class="w-full text-left">
                <thead class="bg-fisioLight text-fisioPrimary"><tr><th class="p-4">Fecha</th><th class="p-4">Paciente</th><th class="p-4">Monto</th></tr></thead>
                <tbody id="tabla-resumen-body"><tr><td colspan="3" class="p-4 text-center">Cargando...</td></tr></tbody>
            </table>
        </div>
    </div>

    <div id="modal-auth" class="fixed inset-0 bg-fisioPrimary bg-opacity-80 hidden flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-80 text-center">
            <h3 class="font-bold text-xl mb-4 text-fisioPrimary">Acceso Restringido</h3>
            <input type="password" id="input-pass" class="w-full p-3 border rounded mb-4 text-center text-lg" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <button onclick="verifyPass()" class="w-full bg-fisioAccent text-white font-bold py-2 rounded">ENTRAR</button>
            <button onclick="closeModal()" class="mt-2 text-sm text-gray-500 underline">Cancelar</button>
        </div>
    </div>

    <script>
        // URL NUEVA PROPORCIONADA
        const API_URL = 'https://script.google.com/macros/s/AKfycbx0wlCKiHCD4yNFyCZjlIIfHtH3ymadPONJZhc_Afnd4zqNeciQ0Cc64qfpfenqxiey3g/exec';

        let currentTarget = '';
        let staffUser = 'Staff';

        // Init
        document.addEventListener('DOMContentLoaded', () => {
             const hoy = new Date().toISOString().split('T')[0];
             if(document.getElementById('venta-fecha')) document.getElementById('venta-fecha').value = hoy;
             if(document.getElementById('cita-fecha')) document.getElementById('cita-fecha').value = hoy;
        });

        // Nav
        function showSection(id) {
            document.querySelectorAll('.section, .hidden-section').forEach(el => el.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            window.scrollTo(0,0);
        }

        // Auth
        function checkAuth(target) {
            currentTarget = target;
            document.getElementById('modal-auth').classList.remove('hidden');
            document.getElementById('input-pass').value = '';
            document.getElementById('input-pass').focus();
        }
        function closeModal() { document.getElementById('modal-auth').classList.add('hidden'); }
        function verifyPass() {
            const pass = document.getElementById('input-pass').value;
            if ((currentTarget === 'staff' || currentTarget === 'staff_historia') && pass === 'Fisio.123') {
                staffUser = prompt("¬øQui√©n eres?", "Staff") || "Staff";
                document.getElementById('staff-name-display').innerText = staffUser;
                closeModal(); showSection(currentTarget === 'staff' ? 'app-staff' : 'app-historia');
            } else if (currentTarget === 'gerencia' && pass === 'marioyavril.') {
                closeModal(); showSection('app-gerencia'); cargarFinanzas();
            } else { alert('Clave incorrecta'); }
        }

        // CITAS - LOGICA MODIFICADA (Duraci√≥n Obligatoria)
        function enviarCita(e) {
            e.preventDefault();
            
            // 1. Obtener Select y Duraci√≥n
            const selectServicio = document.getElementById('cita-servicio');
            const opcionElegida = selectServicio.options[selectServicio.selectedIndex];
            const tiempoElegido = opcionElegida.getAttribute('data-time');

            // Validaci√≥n: ¬øEligi√≥ tiempo?
            if (!tiempoElegido) {
                alert("‚ö†Ô∏è Por favor selecciona un servicio v√°lido con duraci√≥n.");
                return;
            }

            const btn = document.getElementById('btn-cita');
            const originalHtml = btn.innerHTML;
            btn.innerHTML = 'Procesando...'; btn.disabled = true;

            const data = {
                action: 'nuevaCita',
                nombres: document.getElementById('cita-nombre').value,
                apellidos: document.getElementById('cita-apellido').value,
                dni: document.getElementById('cita-doc-tipo').value + ' ' + document.getElementById('cita-doc-num').value,
                email: document.getElementById('cita-email').value,
                whatsapp: document.getElementById('cita-whatsapp').value,
                fecha: document.getElementById('cita-fecha').value,
                hora: document.getElementById('cita-hora').value,
                servicio: selectServicio.value,
                duracion: tiempoElegido // Se env√≠a al backend
            };

            fetch(API_URL, { method: 'POST', mode: 'no-cors', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) })
            .then(() => {
                alert(`‚úÖ Cita Confirmada (${data.duracion} min)\nAgenda bloqueada correctamente.`);
                e.target.reset(); showSection('home');
            })
            .finally(() => { btn.innerHTML = originalHtml; btn.disabled = false; });
        }

        // STAFF
        function setStaffMode(mode) {
            const isAnulacion = mode === 'anulacion';
            document.getElementById('venta-estado').value = isAnulacion ? 'Anulaci√≥n' : 'Venta';
            document.getElementById('div-anulacion-motivo').classList.toggle('hidden', !isAnulacion);
            document.getElementById('anulacion-motivo').required = isAnulacion;
            
            // Estilos
            document.getElementById('tab-venta').className = isAnulacion ? 'flex-1 py-3 rounded-xl font-bold text-gray-500 hover:text-fisioAccent transition' : 'flex-1 py-3 rounded-xl font-bold bg-white text-fisioAccent shadow-sm transition';
            document.getElementById('tab-anulacion').className = isAnulacion ? 'flex-1 py-3 rounded-xl font-bold bg-white text-red-600 shadow-sm transition' : 'flex-1 py-3 rounded-xl font-bold text-gray-500 hover:text-red-500 transition';
            
            const btn = document.getElementById('btn-venta');
            btn.className = isAnulacion ? 'w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg shadow' : 'w-full bg-fisioAccent hover:bg-fisioPrimary text-white font-bold py-3 rounded-lg shadow';
            btn.innerText = isAnulacion ? 'CONFIRMAR ANULACI√ìN' : 'REGISTRAR';
        }

        function autoPrice(select) {
            const price = select.options[select.selectedIndex].getAttribute('data-price');
            if(price) document.getElementById('venta-monto').value = price;
        }

        function registrarVenta(e) {
            e.preventDefault();
            const btn = document.getElementById('btn-venta');
            btn.innerText = 'Guardando...'; btn.disabled = true;
            
            const data = {
                action: 'registrarVenta',
                usuarioLogueado: staffUser,
                terapeuta: document.getElementById('venta-terapeuta').value,
                paciente: document.getElementById('venta-paciente').value,
                fechaSesion: document.getElementById('venta-fecha').value,
                servicio: document.getElementById('venta-servicio').value,
                monto: document.getElementById('venta-monto').value,
                medioPago: document.getElementById('venta-pago').value,
                estado: document.getElementById('venta-estado').value,
                origen: document.getElementById('anulacion-motivo').value || 'Venta' 
            };

            fetch(API_URL, { method: 'POST', mode: 'no-cors', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) })
            .then(() => { alert('Operaci√≥n Exitosa'); e.target.reset(); document.getElementById('venta-fecha').value = new Date().toISOString().split('T')[0]; setStaffMode('venta'); })
            .finally(() => { btn.innerText = 'REGISTRAR'; btn.disabled = false; });
        }

        // GERENCIA
        function cargarFinanzas() {
            const tbody = document.getElementById('tabla-resumen-body');
            tbody.innerHTML = '<tr><td colspan="3" class="p-4 text-center">Cargando...</td></tr>';
            
            fetch(API_URL, { method: 'POST', body: JSON.stringify({action: 'obtenerFinanzas'}) })
            .then(r => r.json())
            .then(d => {
                document.getElementById('kpi-ingresos').innerText = `S/ ${d.ingresos}`;
                document.getElementById('kpi-gastos').innerText = `S/ ${d.egresos}`;
                document.getElementById('kpi-utilidad').innerText = `S/ ${d.utilidad}`;
                tbody.innerHTML = '';
                d.listaVentas.forEach(v => {
                    tbody.innerHTML += `<tr class="border-b"><td class="p-4">${new Date(v[1]).toLocaleDateString()}</td><td class="p-4 font-bold">${v[4]}</td><td class="p-4 font-bold ${v[6]<0?'text-red-500':'text-green-600'}">S/ ${v[6]}</td></tr>`;
                });
            });
        }
    </script>
</body>
</html>